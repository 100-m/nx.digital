import{as as X,bi as ce,at as h,bn as be,_ as ge,f as fe,bb as ve,bc as ye,bd as me,be as pe,bf as he,bo as Me,bp as Ce,bq as Oe,br as Ie,av as Y,af as _,aw as Z,ax as P,C as t,aZ as Ae,a_ as Ve,b8 as Se,b6 as ke,r as we,aD as Be,aE as A,H as He,bg as ze,bh as qe,g as $e,ay as je,az as Le,a1 as Ne,o as u,h as v,w as C,c as r,y as n,A as f,j as V,Q as y,a as m,O as Q,b as L,t as S,aC as Fe,F as We,l as Ue,z as De,d as K}from"./CefpzQTw.js";const c=X(h.ui.strategy,h.ui.select,ce),N=X(h.ui.strategy,h.ui.selectMenu,be),Ee=fe({components:{HCombobox:ve,HComboboxButton:ye,HComboboxOptions:me,HComboboxOption:pe,HComboboxInput:he,HListbox:Me,HListboxButton:Ce,HListboxOptions:Oe,HListboxOption:Ie,UIcon:Y,UAvatar:_},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array,Boolean],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>c.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>N.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},searchableLazy:{type:Boolean,default:!1},clearSearchOnClose:{type:Boolean,default:()=>N.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:[String,Function],default:()=>N.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(c.size).includes(e)}},color:{type:String,default:()=>c.default.color,validator(e){return[...h.ui.colors,...Object.keys(c.color)].includes(e)}},variant:{type:String,default:()=>c.default.variant,validator(e){return[...Object.keys(c.variant),...Object.values(c.color).flatMap(d=>Object.keys(d))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:d,slots:F}){const{ui:l,attrs:T}=Z("select",P(e,"ui"),c,P(e,"class")),{ui:k}=Z("selectMenu",P(e,"uiMenu"),N),p=t(()=>Ae({},e.popper,k.value.popper)),[W,w]=Ve(p.value),{size:B,rounded:H}=Se({ui:l,props:e}),{emitFormBlur:z,emitFormChange:i,inputId:O,color:s,size:I,name:U}=ke(e,c),b=t(()=>B.value??I.value),R=we(""),o=t({get(){return e.query??R.value},set(a){R.value=a,d("update:query",a)}}),D=t(()=>e.multiple?!Array.isArray(e.modelValue)||!e.modelValue.length?[]:e.valueAttribute?M.value.filter(a=>e.modelValue.includes(a[e.valueAttribute])):M.value.filter(a=>e.modelValue.includes(a)):e.valueAttribute?M.value.find(a=>a[e.valueAttribute]===e.modelValue):M.value.find(a=>a===e.modelValue)),x=t(()=>{var a;return e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length?`${D.value.length} selected`:null:e.modelValue!==void 0&&e.modelValue!==null?e.valueAttribute?((a=D.value)==null?void 0:a[e.optionAttribute])??null:["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute]:null}),ee=t(()=>{var g,j;const a=((j=(g=l.value.color)==null?void 0:g[s.value])==null?void 0:j[e.variant])||l.value.variant[e.variant];return Be(A(l.value.base,k.value.select,H.value,l.value.size[b.value],l.value.gap[b.value],e.padded?l.value.padding[b.value]:"p-0",a==null?void 0:a.replaceAll("{color}",s.value),(q.value||F.leading)&&l.value.leading.padding[b.value],(J.value||F.trailing)&&l.value.trailing.padding[b.value]),e.placeholder&&(!e.modelValue||Array.isArray(e.modelValue)&&!e.modelValue.length)&&l.value.placeholder,e.selectClass)}),q=t(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),J=t(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ae=t(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),le=t(()=>e.loading&&!q.value?e.loadingIcon:e.trailingIcon||e.icon),ne=t(()=>A(l.value.icon.leading.wrapper,l.value.icon.leading.pointer,l.value.icon.leading.padding[b.value])),ue=t(()=>A(l.value.icon.base,s.value&&h.ui.colors.includes(s.value)&&l.value.icon.color.replaceAll("{color}",s.value),l.value.icon.size[b.value],e.loading&&l.value.icon.loading)),ie=t(()=>A(l.value.icon.trailing.wrapper,l.value.icon.trailing.pointer,l.value.icon.trailing.padding[b.value])),te=t(()=>A(l.value.icon.base,s.value&&h.ui.colors.includes(s.value)&&l.value.icon.color.replaceAll("{color}",s.value),l.value.icon.size[b.value],e.loading&&!q.value&&l.value.icon.loading)),E=e.searchable&&typeof e.searchable=="function"?He(e.searchable,e.debounce):void 0,M=ze(async()=>E?await E(o.value):e.options||[],[],{lazy:e.searchableLazy}),$=t(()=>!o.value||E?M.value:M.value.filter(a=>{var g;return((g=e.searchAttributes)!=null&&g.length?e.searchAttributes:[e.optionAttribute]).some(j=>{if(["string","number"].includes(typeof a))return String(a).search(new RegExp(o.value,"i"))!==-1;const G=qe(a,j);return G!=null&&String(G).search(new RegExp(o.value,"i"))!==-1})})),oe=t(()=>o.value===""||e.showCreateOptionWhen==="empty"&&$.value.length||e.showCreateOptionWhen==="always"&&$.value.find(g=>["string","number"].includes(typeof g)?g===o.value:g[e.optionAttribute]===o.value)||typeof e.showCreateOptionWhen=="function"&&!e.showCreateOptionWhen(o.value,$.value)?null:["string","number"].includes(typeof e.modelValue)?o.value:{[e.optionAttribute]:o.value});function se(){e.clearSearchOnClose&&(o.value="")}$e(w,a=>{a?d("open"):(se(),d("close"),z())});function re(a){d("update:modelValue",a),d("change",a),i()}function de(a){o.value=a.target.value}return je(()=>Le()),{ui:l,uiMenu:k,attrs:T,name:U,inputId:O,popper:p,trigger:W,container:w,selected:D,label:x,isLeading:q,isTrailing:J,selectClass:ee,leadingIconName:ae,leadingIconClass:ue,leadingWrapperIconClass:ne,trailingIconName:le,trailingIconClass:te,trailingWrapperIconClass:ie,filteredOptions:$,createOption:oe,query:o,onUpdate:re,onQueryChange:de}}}),Ge=["value","required"],Pe=["id","disabled"],Qe={class:"truncate"};function Te(e,d,F,l,T,k){const p=Y,W=Ne("HComboboxInput"),w=_;return u(),v(V(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.multiple?Array.isArray(e.modelValue)?e.modelValue:[]:e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:n(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:C(({open:B})=>[e.required?(u(),r("input",{key:0,value:e.modelValue,required:e.required,class:n(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,Ge)):f("",!0),(u(),v(V(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:n(e.uiMenu.trigger)},{default:C(()=>[y(e.$slots,"default",{open:B,disabled:e.disabled,loading:e.loading},()=>[m("button",Q({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?(u(),r("span",{key:0,class:n(e.leadingWrapperIconClass)},[y(e.$slots,"leading",{selected:e.selected,disabled:e.disabled,loading:e.loading},()=>[L(p,{name:e.leadingIconName,class:n(e.leadingIconClass)},null,8,["name","class"])])],2)):f("",!0),y(e.$slots,"label",{selected:e.selected},()=>[e.label?(u(),r("span",{key:0,class:n(e.uiMenu.label)},S(e.label),3)):(u(),r("span",{key:1,class:n(e.uiMenu.label)},S(e.placeholder||"Â "),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(u(),r("span",{key:1,class:n(e.trailingWrapperIconClass)},[y(e.$slots,"trailing",{selected:e.selected,disabled:e.disabled,loading:e.loading},()=>[L(p,{name:e.trailingIconName,class:n(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):f("",!0)],16,Pe)])]),_:2},1032,["class"])),B?(u(),r("div",{key:1,ref:"container",class:n([e.uiMenu.container,e.uiMenu.width])},[L(Fe,Q({appear:""},e.uiMenu.transition),{default:C(()=>[m("div",null,[e.popper.arrow?(u(),r("div",{key:0,"data-popper-arrow":"",class:n(Object.values(e.uiMenu.arrow))},null,2)):f("",!0),(u(),v(V(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:n([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:C(()=>{var H,z;return[e.searchable?(u(),v(W,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:n(e.uiMenu.input),onChange:e.onQueryChange},null,8,["display-value","placeholder","class","onChange"])):f("",!0),(u(!0),r(We,null,Ue(e.filteredOptions,(i,O)=>(u(),v(V(e.searchable?"HComboboxOption":"HListboxOption"),{key:O,as:"template",value:e.valueAttribute?i[e.valueAttribute]:i,disabled:i.disabled},{default:C(({active:s,selected:I,disabled:U})=>[m("li",{class:n([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,s?e.uiMenu.option.active:e.uiMenu.option.inactive,I&&e.uiMenu.option.selected,U&&e.uiMenu.option.disabled])},[m("div",{class:n(e.uiMenu.option.container)},[y(e.$slots,"option",{option:i,active:s,selected:I},()=>[i.icon?(u(),v(p,{key:0,name:i.icon,class:n([e.uiMenu.option.icon.base,s?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,i.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):i.avatar?(u(),v(w,Q({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...i.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):i.chip?(u(),r("span",{key:2,class:n(e.uiMenu.option.chip.base),style:De({background:`#${i.chip}`})},null,6)):f("",!0),m("span",Qe,S(["string","number"].includes(typeof i)?i:i[e.optionAttribute]),1)])],2),I?(u(),r("span",{key:0,class:n([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[L(p,{name:e.selectedIcon,class:n(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):f("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?(u(),v(V(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:C(({active:i,selected:O})=>[m("li",{class:n([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,i?e.uiMenu.option.active:e.uiMenu.option.inactive])},[m("div",{class:n(e.uiMenu.option.container)},[y(e.$slots,"option-create",{option:e.createOption,active:i,selected:O},()=>[m("span",{class:n(e.uiMenu.option.create)},'Create "'+S(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!((H=e.filteredOptions)!=null&&H.length)?(u(),r("p",{key:2,class:n(e.uiMenu.option.empty)},[y(e.$slots,"option-empty",{query:e.query},()=>[K(' No results for "'+S(e.query)+'". ',1)])],2)):(z=e.filteredOptions)!=null&&z.length?f("",!0):(u(),r("p",{key:3,class:n(e.uiMenu.empty)},[y(e.$slots,"empty",{query:e.query},()=>[d[0]||(d[0]=K(" No options. "))])],2))]}),_:3},8,["class"]))])]),_:3},16)],2)):f("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const Je=ge(Ee,[["render",Te]]);export{Je as default};
