import{a2 as M,a5 as E}from"./BJUyEi7U.js";//! Users
const d=[{id:1,username:"John Doe",email:"john.doe@neoxam.com",role:"admin"},{id:2,username:"Emilie Gentili",email:"emilie.gentili@neoxam.com",role:"admin"},{id:3,username:"Thomas Mousseau",email:"thomas.mousseau@neoxam.com",role:"admin"},{id:4,username:"Pierre-Yves Fourie",email:"pierre-yves.fourie@neoxam.com",role:"admin"},{id:5,username:"Olivier Laurent",email:"olivier.laurent@neoxam.com",role:"admin"},{id:6,username:"Maysa Mansouri",email:"maysa.mansouri@neoxam.com",role:"admin"},{id:7,username:"Eyram Tengue",email:"eyram.tengue@neoxam.com",role:"admin"},{id:8,username:"Sonia Agrane",email:"sonia.agrane@neoxam.com",role:"admin"},{id:9,username:"Leroen Verleyen",email:"leroen.verleyen@neoxam.com",role:"admin"},{id:10,username:"Jean Tidor",email:"jean.tidor@neoxam.com",role:"admin"},{id:11,username:"Sabine Cathala",email:"sabine.cathala@neoxam.com",role:"admin"},{id:12,username:"Oualama Kone",email:"oualama.kone@neoxam.com",role:"admin"},{id:13,username:"Jerome Bellaiche",email:"jerome.bellaiche@neoxam.com",role:"admin"},{id:14,username:"Roger Queudrue",email:"roger.queudrue@neoxam.com",role:"admin"},{id:15,username:"Adriano Di Fatta",email:"adriano.di.fatta@neoxam.com",role:"admin"},{id:16,username:"Mathieu Lehenaff",email:"mathieu.lehenaff@neoxam.com",role:"admin"},{id:17,username:"Nathalie Felquignie",email:"nathalie.felquignie@neoxam.com",role:"admin"},{id:18,username:"Carine Hueso",email:"carine.hueso@neoxam.com",role:"admin"},{id:19,username:"Dominique Gueguen",email:"dominique.gueguen@neoxam.com",role:"admin"},{id:20,username:"Stephanie De-Sousa",email:"stephanie.de-sousa@neoxam.com",role:"admin"}];//! Files
const l=[{path:"/Production/nested/path/mandarine-active-I-2020-02.pdf",modified:"2024-01-01T10:00:00Z",size:1024,runId:Math.floor(Math.random()*10)},{path:"/Production/two.pdf",modified:"2024-01-01T10:00:00Z",size:4096,runId:Math.floor(Math.random()*10)},{path:"/Production/three.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/four.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/five.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/six.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/seven.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/eight.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/nine.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/ten.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Production/eleven.pdf",modified:"2024-01-01T10:00:00Z",size:2048,runId:Math.floor(Math.random()*10)},{path:"/Dissemination/NeoXam AM EPT outbox_2024-01-12_10:29:45/one.pdf",modified:"2024-01-01T10:00:00Z",size:3078752,runId:Math.floor(Math.random()*10)},{path:"/Dissemination/NeoXam AM EPT outbox_2024-01-12_10:29:45/three.docx",modified:"2024-01-01T12:00:00Z",size:1013538,runId:Math.floor(Math.random()*10)},{path:"/Dissemination/NeoXam AM EPT outbox_2024-01-12_10:29:45/two.xlsx",modified:"2024-01-01T11:00:00Z",size:77652,runId:Math.floor(Math.random()*10)},{path:"/Document between folder.pdf",modified:"2024-01-01T10:00:00Z",size:4096,runId:Math.floor(Math.random()*10)},{path:"/Folder.dot.something/file.dot.pdf",modified:"2024-01-01T10:00:00Z",size:4096,runId:Math.floor(Math.random()*10)},{path:"/Document at the root.pdf",modified:"2024-01-01T10:00:00Z",size:4096,runId:Math.floor(Math.random()*10)},{path:"/Document without run ID.pdf",modified:"2024-01-01T10:00:00Z",size:4096}].map((e,a)=>({id:a,...e}));//! Events
const g=[{key:"external-event",value:!0},{key:"validation-1-25",value:!0},{key:"validation-2-25",value:!0},{key:"event-command-master-1",value:!0},{key:"validation-3-25",value:!0}].map((e,a)=>({id:a,...e}));//! Specialty Data
const m=[{id:101,name:"NeoXam AM EPT"},{id:102,name:"NeoXam AM EPT 2"},{id:103,name:"NeoXam AM EPT 3"},{id:104,name:"NeoXam AM EPT 4"}];//! Specialties
const h=[{id:1,url:"https://specialty.neoxam.com/control-center",name:"Control Center",parameters:[{name:"date",type:"businessDate",required:!0},{name:"fundId",type:"fund",required:!0}],commands:["Check Valuation Calendar","Comments Management"],data:{businessDate:e=>[],fund:e=>m,role:e=>[]}}];//! Workflows
const f=[{name:"M.3 TOP ECHUS",specialtyId:1,specialty:h.find(e=>e.id===1),steps:[{id:1,name:"M.3 TOP ECHUS",isBlocking:!0,isResolving:!1,command:"TOP ECHUS MATIN",waitFor:["TOP B.7 Check Manual Entry","TOP B.9 GENECR"],instruction:""},{id:2,name:"M.4 CATAUX",isBlocking:!0,isResolving:!1,command:"CATAUX",conditions:["condition result TOP ECHUS MATIN"],validation:"Fait",instruction:`M.4.1_a - Calcul des taux complexes (CATAUX)
Lancer CATAUX`},{id:3,name:"M.5 ECHUS - AUTO",isBlocking:!0,isResolving:!1,command:"ECHUS",conditions:["condition result TOP ECHUS MATIN"],waitFor:["TOP M.2 REGLER"],validation:"Fait",instruction:`M.5.1
Lancer les echus`},{id:4,name:"M.6 ECHUS - MANUAL",isBlocking:!0,isResolving:!1,validation:"Fait",instruction:`M.6.1 - Application des Échéances (ECHUS)
Lancer ECHUS avec ALL sur categories`},{id:5,name:"M.7 CALCBT",isBlocking:!0,isResolving:!1,command:"CALCBT",validation:"Fait",instruction:`M.7.1_a - Calcul des cours des valeurs rattachées sur courbe de taux (CALCBT)
Lancer CALCBT avec la pricing policy du fonds.`},{id:6,name:"M.10 Check PRE-NAV",isBlocking:!0,isResolving:!1,command:"0030_PRE_NAV",waitFor:["TOP M.9 Check MARGIN CALL"],event:"TOP M.10 Check PRE-NAV",validation:"Fait",instruction:`M.10.1_a - Contrôle PRE-NAV
Lancer manuellement le package 0030_PRE_NAV
En cas de non fonctionnement de l'EMS, effectuer manuellement les check Pre-NAV.`}]},{name:"M.1 Start Pre-NAV Process",specialtyId:1,specialty:h.find(e=>e.id===1),steps:[{id:1,name:"M.1 Start Pre-NAV Process",isBlocking:!0,isResolving:!1,waitFor:["TOP B.7 Check Manual Entry","TOP B.9 GENECR"],validation:"Fait",instruction:"M.1.1 - Démarrage du Pre-NAV Process"},{id:2,name:"M.2 REGLER",isBlocking:!0,isResolving:!1,command:"REGLER",event:"TOP M.2 REGLER",validation:"Fait",instruction:`M.2.1_a - Lancement du règlement différé (REGLER)
Lancer REGLER avec REGDIF au niveau type de Compte`},{id:3,name:"M.11 CHECK INTERFACE",isBlocking:!0,isResolving:!1,command:"0010_INTERFACE",validation:"Fait",instruction:`M.11.1
Lancer manuellement dans l'EMS le package 0010_INTERFACE à la date VL.\r
En cas de non fonctionnement de l'EMS, vérifier l'état CONTROL sur les trades avec un statut NT et ER.`},{id:4,name:"M.12 Manual Entry",isBlocking:!0,isResolving:!1,validation:"Fait",instruction:`M.12.2 - Saisie Manuelle - 4 eyes
Saisies manuelles nécessitant un 4 eyes`},{id:5,name:"M.14 Check Manual Entry",isBlocking:!0,isResolving:!1,command:"0020_SAISIES",waitFor:["TOP M.13 OD (Miscelleaneous Transaction)"],validation:"Fait",instruction:`M.14.1 - Contrôle des saisies
Lancer manuellement dans l'EMS le package 0020_SAISIES à la date VL.
En cas de non fonctionnement de l'EMS, le signaler en commentaire.`},{id:6,name:"M.15 Four Eyes",isBlocking:!0,isResolving:!1,command:"0021_FOUR_EYES",validation:"Fait",instruction:`M.15.1.a
Lancer manuellement dans l'EMS le package 0021_Four Eyes à la date VL.\r
En cas de non fonctionnement de l'EMS, le signaler en commentaire.`},{id:7,name:"M.16 GENECR",isBlocking:!0,isResolving:!1,command:"GENECR",event:"TOP M.16 GENECR",validation:"Fait",instruction:`M.16.1_a - Generation des ecritures comptables (GENECR)
Lancer un GENECR`}]}].map((e,a)=>({id:a,...e}));//! Runs
const y=Array.from(Array(10)).map((e,a)=>{const t=Math.floor(Math.random()*f.length),n=Math.floor(Math.random()*m.length);return{id:a+1,owner:Math.random()>.1?d[Math.floor(Math.random()*d.length)].username:void 0,priority:Math.random()>.1?"LOW":"STANDARD",parameters:{businessDate:"2024-10-14",fundId:m[n].id},info:{fund:{id:m[n].id,name:m[n].name}},logs:[{id:5,stepId:5,status:"RUNNING",start:"2024-01-01T10:15:00"},{id:4,stepId:4,status:"SUCCESS",start:"2024-01-01T10:15:00",end:"2024-01-01T10:20:00",stderr:"",stdout:"Fichier généré avec succès",files:[l[Math.floor(Math.random()*l.length)],l[Math.floor(Math.random()*l.length)]]},{id:3,stepId:3,status:"QUEUED",start:"2024-01-01T10:15:00"},{id:2,stepId:2,status:"QUEUED",start:"2024-01-01T10:15:00"},{id:1,stepId:1,status:"SUCCESS",start:"2024-01-01T10:00:00",end:"2024-01-01T10:10:00",actioner:d[Math.floor(Math.random()*d.length)].username,assignee:d[Math.floor(Math.random()*d.length)].username}],workflowId:f[t].id,workflow:f[t],createdAt:"2024-01-01T10:00:00Z",updatedAt:"2024-01-01T10:15:00Z"}});//! Data
const s={users:d,files:l,events:g,specialties:h,workflows:f,runs:y};function c(e){return new Promise(a=>setTimeout(a,e))}const u={database:{async select(e){return await c(200),s[e]},async create(e,a){await c(200),s[e].push(a)},async update(e,a){await c(200),s[e][a.id]=a},async delete(e,a){await c(200),a=typeof a=="number"?a:a.id,s[e]=s[e].filter(t=>t.id!==a)}},functions:{async run_archive(e){const t=(Array.isArray(e)?e:[e]).map(n=>n.id);s.runs=s.runs.filter(n=>!t.includes(n.id))},async run_assign(e,a){},async run_comment(e){},async run_priority_decrease(e){},async run_priority_increase(e){},async run_priority_set(e,a){},async run_upload(e,a){},async step_reject(e){},async step_rerun(e){},async step_skip(e){},async step_validate(e){}},can(e){return!0},support:null};function T(e){const a=M([]);return p.database.select(e).then(t=>a.value=t),E(()=>p.database.select(e).then(t=>a.value=t),500),{data:a}}function v(e){return Object.entries(e)}v(u.functions).forEach(([e,a])=>{u.functions[e]=async function(...t){try{if(!u.can(e))return console.warn(e,"not allowed");await a(...t),console.log(e,t[0].id||t[0].map("id")),toast.success(e)}catch(n){console.error(e,t[0].id||t[0].map("id"),n),toast.error(e)}}});const A={run_archive:e=>!0,run_comment:e=>!0,run_upload:e=>!0,run_priority_decrease:e=>!0,run_priority_increase:e=>!0,run_priority_set:e=>!0,run_assign:e=>!0,step_rerun:(e,a)=>(Array.isArray(e)?e:[e]).every(n=>{const i=a?n.logs.find(r=>r.stepId===a):n.logs[0];return i?["SUCCESS","SKIPPED","ERROR"].includes(i.status):!1}),step_skip:(e,a)=>(Array.isArray(e)?e:[e]).every(n=>{const i=n.workflow.steps.find(o=>o.id===(a??n.logs[0].stepId)),r=n.logs.find(o=>o.stepId===(a??n.logs[0].stepId));return!i||!r||!i.command?!1:!["SUCCESS","SKIPPED","ERROR"].includes(r.status)}),step_validate:(e,a)=>(Array.isArray(e)?e:[e]).every(n=>{const i=n.workflow.steps.find(o=>o.id===(a??n.logs[0].stepId)),r=n.logs.find(o=>o.stepId===(a??n.logs[0].stepId));return!(!i||!r||i.command||r.status!=="RUNNING")}),step_reject:(e,a)=>(Array.isArray(e)?e:[e]).every(n=>{const i=n.workflow.steps.find(o=>o.id===(a??n.logs[0].stepId)),r=n.logs.find(o=>o.stepId===(a??n.logs[0].stepId));return!(!i||!r||i.command||r.status!=="RUNNING")})};u.support=(e,a,t)=>{try{return A[e](a,t)}catch(n){return console.log("todo",n),!0}};const p=u,R=T;export{p as a,R as u};
